<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="reporte.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

    <link rel="stylesheet" href="reporte.css">


    <title>reporte</title>
</head>

<body>

    <div class="btn d-inline-flex btn-sm btn-primary mx-1">
        <span class=" pe-2" onclick="openModal()">
            <i class="bi bi-plus
">
                <h7 class="btn">Crear Reporte</h7>


            </i>
        </span>
    </div>
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2 class="textmodal">Crear Reporte</h2>
                <label for="fecha">Fecha</label>
                <input type="date" id="fecha" name="fecha" class="form-control" required>
                <label for="descripcion">Descripción</label>
                <input type="text" id="descripcion" name="descripcion" class="form-control" required>
                <label for="doc">Doc</label>
                <input type="text" id="doc" name="doc" class="form-control" required>
                <label for="entradas">Entradas</label>
                <input type="text" id="entradas" name="entradas" class="form-control" required>
                <label for="precio">Precio</label>
                <input type="text" id="precio" name="precio" class="form-control" required>
                <label for="preciototal">Precio Total</label>
                <input type="text" id="preciototal" name="preciototal" class="form-control" required>
                <label for="cantidad">Cantidad</label>
                <input type="text" id="cantidad" name="cantidad" class="form-control" required>
                <label for="preciou">Precio/U</label>
                <input type="text" id="preciou" name="preciou" class="form-control" required>
                <label for="preciototal1">Precio total</label>
                <input type="text" id="preciototal1" name="preciototal1" class="form-control" required>
                <label for="cantidad1">Cantidad</label>
                <input type="text" id="cantidad1" name="cantidad1" class="form-control" required>
                <label for="preciou1">Precio/U</label>

                <input type="text" id="preciou1" name="preciou1" class="form-control" required>
                <label for="preciototal2">Precio Total</label>
                <input type="text" id="preciototal2" name="preciototal2" class="form-control" required>





                <button class="btnguardar" type="button" onclick="guardar()">Guardar</button>
                <button class="btncerrar" type="button" onclick="closeModal()">Cerrar</button>





            </div>
        </div>
    </div>


    <!-- modal editar -->
    <div id="myModal2" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal2()">&times;</span>
            <h2>Editar Reporte</h2>
            <input type="hidden" id="indexE">
            <label for="fecha">Fecha</label>
            <input type="date" id="fechaE" name="fecha" class="form-control" required>
            <label for="descripcion">Descripción</label>
            <input type="text" id="descripcionE" name="descripcion" class="form-control" required>
            <label for="doc">Doc</label>
            <input type="text" id="docE" name="doc" class="form-control" required>
            <label for="entradas">Entradas</label>
            <input type="text" id="entradasE" name="entradas" class="form-control" required>
            <label for="precio">Precio</label>
            <input type="text" id="precioE" name="precio" class="form-control" required>
            <label for="preciototal">Precio Total</label>
            <input type="text" id="preciototalE" name="preciototal" class="form-control" required>
            <label for="cantidad">Cantidad</label>
            <input type="text" id="cantidadE" name="cantidad" class="form-control" required>
            <label for="preciou">Precio/U</label>
            <input type="text" id="preciouE" name="preciou" class="form-control" required>
            <label for="preciototal1">Precio total</label>
            <input type="text" id="preciototal1E" name="preciototal1" class="form-control" required>
            <label for="cantidad1">Cantidad</label>
            <input type="text" id="cantidad1E" name="cantidad1" class="form-control" required>
            <label for="preciou1">Precio/U</label>
            <input type="text" id="preciou1E" name="preciou1" class="form-control" required>
            <label for="preciototal2">Precio Total</label>
            <input type="text" id="preciototal2E" name="preciototal2" class="form-control" required>
             
            <button class="btnguardar" type="button" onclick="editarGuardar()">Guardar</button>
            <button class="btncerrar" type="button" onclick="closeModal2()">Cerrar</button>
        </div>
    </div>







    <div class="table-responsive">
        <table id="myTable" class="table table-hover table-nowrap">
            <div id="teams"></div>
            <thead class="thead-light">
                <tr>
                    <th class="Detalle scope="col" colspan="4">Detalle</th>
                    <th class="Entradas" scope="col" colspan="4">Entradas</th>
                    <th class="Salidas" scope="col" colspan="4">Salidas</th>

                </tr>


                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Descripción</th>
                    <th scope="col">Doc</th>
                    <th scope="col">Entradas</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Precio Total</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Precio/U</th>
                    <th scope="col">Precio Total</th>
                    <th scope="col">Cantida</th>
                    <th scope="col">Precio/U</th>
                    <th scope="col">Precio Total</th>
                    <th scope="col" class="text-end">Actions</th>

                </tr>
            </thead>
            <tbody id="tablaA">


            </tbody>


        </table>
    </div>
    </div>


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- Asegúrate de incluir jQuery y DataTables.js en tu HTML -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>




    <div
        class="fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600">
        <div class="grid h-full max-w-lg grid-cols-4 mx-auto font-medium">
            <button onclick="home()" type="button"
                class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500"
                    aria-hidden="true" xmlns="" fill="currentColor" viewBox="0 0 20 20">
                    <path
                        d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z" />
                </svg>
                <span
                    class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">panel</span>
            </button>
            <button onclick="calendario()" type="button"
                class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m4-2v6m4-6v6m5 6a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 011-1.732V7a2 2 0 012-2h1V3a1 1 0 112 0v2h4V3a1 1 0 112 0v2h1a2 2 0 012 2v.268A2 2 0 0121 9v8a2 2 0 01-2 2z"></path>
                  </svg>
                <span
                    class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Calendario</span>
            </button>
            <button onclick="reporte()" type="button"
                class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500"
                    aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 12.25V1m0 11.25a2.25 2.25 0 0 0 0 4.5m0-4.5a2.25 2.25 0 0 1 0 4.5M4 19v-2.25m6-13.5V1m0 2.25a2.25 2.25 0 0 0 0 4.5m0-4.5a2.25 2.25 0 0 1 0 4.5M10 19V7.75m6 4.5V1m0 11.25a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM16 19v-2" />
                </svg>
                <span
                    class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">reporte</span>
            </button>
            <button onclick="galeria()" type="button"
                class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h18a1 1 0 011 1v16a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zm3 16l3-3 3 3 3-3 3 3"></path>
                  </svg>
                <span
                    class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Galeria</span>
            </button>
        </div>
    </div>



    <script>


        function openModal() {
            document.getElementById("myModal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("myModal").style.display = "none";
        }

        function closeModal2() {
            document.getElementById("myModal2").style.display = "none";
        }
        function openModal2() {
            document.getElementById("myModal2").style.display = "block";
        }

        const guardar = () => {
            let fecha = document.getElementById("fecha").value;
            let descripcion = document.getElementById("descripcion").value;
            let doc = document.getElementById("doc").value;
            let entradas = document.getElementById("entradas").value;
            let precio = document.getElementById("precio").value;
            let preciototal = document.getElementById("preciototal").value;
            let cantidad = document.getElementById("cantidad").value;
            let preciou = document.getElementById("preciou").value;
            let preciototal1 = document.getElementById("preciototal1").value;
            let cantidad1 = document.getElementById("cantidad1").value;
            let preciou1 = document.getElementById("preciou1").value;
            let preciototal2 = document.getElementById("preciototal2").value;

            let teams = JSON.parse(localStorage.getItem("reportes")) || [];
            teams.push({ fecha, descripcion, doc, entradas, precio, preciototal, cantidad, preciou, preciototal1, cantidad1, preciou1, preciototal2 });
            localStorage.setItem("reportes", JSON.stringify(teams));
            closeModal();
            cargar();

        }


        const cargar = () => {
            let teams = JSON.parse(localStorage.getItem("reportes")) || [];
            let tabla = document.getElementById("tablaA");
            let html = "";
            teams.map((team, index) => {
                html += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${team.fecha}</td>
                    <td>${team.descripcion}</td>
                    <td>${team.doc}</td>
                    <td>${team.entradas}</td>
                    <td>${team.precio}</td>
                    <td>${team.preciototal}</td>
                    <td>${team.cantidad}</td>
                    <td>${team.preciou}</td>
                    <td>${team.preciototal1}</td>
                    <td>${team.cantidad1}</td>
                    <td>${team.preciou1}</td>
                    <td>${team.preciototal2}</td>
                    <td class="text-end">
                        <button class="btn btn-sm btn-primary" onclick="editar1('${team.fecha}', '${team.descripcion}', '${team.doc}', '${team.entradas}', '${team.precio}', '${team.preciototal}', '${team.cantidad}', '${team.preciou}', '${team.preciototal1}', '${team.cantidad1}', '${team.preciou1}', '${team.preciototal2}', ${index})">Editar</button>
                        <button class="btn btn-sm btn-danger" onclick="eliminar(${index})">Eliminar</button>
                    </td>
                </tr>`;
            });
            tabla.innerHTML = html;

        }



        $(document).ready(function () {
            $('#myTable').DataTable({
                "paging": true, // Habilita la paginación
                "pageLength": 5, // Establece la cantidad de filas por página
                "lengthChange": false, // Oculta el control para cambiar la cantidad de filas por página
                "searching": true, // Habilita la búsqueda
                "ordering": true, // Habilita la ordenación
                "info": true, // Muestra información sobre la cantidad de filas
                "autoWidth": false, // Habilita el ajuste automático del ancho de las columnas
                "responsive": true, // Habilita el diseño responsivo
                "language": {
                    "lengthMenu": "Mostrar _MENU_ registros por página",
                    "zeroRecords": "No se encontraron registros",
                    "info": "Mostrando la página _PAGE_ de _PAGES_",
                    "infoEmpty": "No hay registros disponibles",
                    "infoFiltered": "(filtrado de _MAX_ registros totales)",
                    "search": "Buscar:",
                    "paginate": {
                        "previous": "Anterior",
                        "next": "Siguiente"
                    }


                }



            });
        });





        function home() {
            window.location.href = "home.html";


        }

        function calendario() {
            window.location.href = "calendario.html";
        }

        function reporte() {
            window.location.href = "reporte.html";
        }

        function galeria() {
            window.location.href = "galeria.html";

        }

        const eliminar = (index) => {
            let teams = JSON.parse(localStorage.getItem("reportes")) || [];
            teams.splice(index, 1);
            localStorage.setItem("reportes", JSON.stringify(teams));
            cargar();
        }

        const Editar = () => {
            document.getElementById("fechaE").value = team.fecha;
            document.getElementById("descripcionE").value = team.descripcion;
            document.getElementById("docE").value = team.doc;
            document.getElementById("entradasE").value = team.entradas;
            document.getElementById("precioE").value = team.precio;
            document.getElementById("preciototalE").value = team.preciototal;
            document.getElementById("cantidadE").value = team.cantidad;
            document.getElementById("preciouE").value = team.preciou;
            document.getElementById("preciototal1E").value = team.preciototal1;
            document.getElementById("cantidad1E").value = team.cantidad1;
            document.getElementById("preciou1E").value = team.preciou1;
            document.getElementById("preciototal2E").value = team.preciototal2;
            document.getElementById("indexE").value = index;

            let teams = JSON.parse(localStorage.getItem("reportes")) || [];
            teams.push({ fecha, descripcion, doc, entradas, precio, preciototal, cantidad, preciou, preciototal1, cantidad1, preciou1, preciototal2 });
            localStorage.setItem("reportes", JSON.stringify(teams));
            closeModal2();
            cargar();

        }

        const editar1  = (fecha, descripcion, doc, entradas, precio, preciototal, cantidad, preciou, preciototal1, cantidad1, preciou1, preciototal2, index) => {
       
            document.getElementById("fechaE").value = fecha;
            document.getElementById("descripcionE").value = descripcion;
            document.getElementById("docE").value = doc;
            document.getElementById("entradasE").value = entradas;
            document.getElementById("precioE").value = precio;
            document.getElementById("preciototalE").value = preciototal;
            document.getElementById("cantidadE").value = cantidad;
            document.getElementById("preciouE").value = preciou;
            document.getElementById("preciototal1E").value = preciototal1;
            document.getElementById("cantidad1E").value = cantidad1;
            document.getElementById("preciou1E").value = preciou1;
            document.getElementById("preciototal2E").value = preciototal2;
            document.getElementById("indexE").value = index;
            openModal2();
        }

        cargar();

      












    </script>







</body>

</html>